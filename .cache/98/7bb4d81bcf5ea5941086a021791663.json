{"id":"zpJW","dependencies":[{"name":"C:\\Users\\S de Santi\\Desktop\\NewProject\\tsconfig.json","includedInParent":true,"mtime":1624300732051},{"name":"C:\\Users\\S de Santi\\Desktop\\NewProject\\package.json","includedInParent":true,"mtime":1624620152425},{"name":"tslib","loc":{"line":1,"column":26},"parent":"C:\\Users\\S de Santi\\Desktop\\NewProject\\src\\client\\scenes\\GameHub.ts","resolved":"C:\\Users\\S de Santi\\Desktop\\NewProject\\node_modules\\tslib\\tslib.es6.js"},{"name":"phaser","loc":{"line":2,"column":19},"parent":"C:\\Users\\S de Santi\\Desktop\\NewProject\\src\\client\\scenes\\GameHub.ts","resolved":"C:\\Users\\S de Santi\\Desktop\\NewProject\\node_modules\\phaser\\dist\\phaser.js"},{"name":"@colyseus/schema","loc":{"line":3,"column":33},"parent":"C:\\Users\\S de Santi\\Desktop\\NewProject\\src\\client\\scenes\\GameHub.ts","resolved":"C:\\Users\\S de Santi\\Desktop\\NewProject\\node_modules\\@colyseus\\schema\\lib\\index.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _tslib = require(\"tslib\");\n\nvar _phaser = _interopRequireDefault(require(\"phaser\"));\n\nvar _schema = require(\"@colyseus/schema\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar GameHub = /*#__PURE__*/function (_Phaser$Scene) {\n  _inherits(GameHub, _Phaser$Scene);\n\n  var _super = _createSuper(GameHub);\n\n  function GameHub() {\n    var _this;\n\n    _classCallCheck(this, GameHub);\n\n    _this = _super.call(this, 'hub');\n\n    _this.handleInitHub = function (state) {\n      _this.initHub(state);\n    };\n\n    return _this;\n  }\n\n  _createClass(GameHub, [{\n    key: \"create\",\n    value: function create(data) {\n      return (0, _tslib.__awaiter)(this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var server;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                server = data.server;\n                this.players = new _schema.CollectionSchema();\n                this.server = server;\n\n                if (this.server) {\n                  _context.next = 5;\n                  break;\n                }\n\n                throw new Error('server instance failed');\n\n              case 5:\n                _context.next = 7;\n                return this.server.join();\n\n              case 7:\n                if (this.server !== undefined) {\n                  this.server.onStateChanged(this.handleInitHub, this);\n                  this.server.onPlayerJoin(this.handlePlayersJoin, this);\n                  this.server.onPlayerLeave(this.handlePlayersLeave, this);\n                  this.server.onMasterLaunch(this.handleMasterLaunch, this);\n                }\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }, {\n    key: \"initHub\",\n    value: function initHub(state) {\n      var background = this.add.rectangle(0, 0, window.innerWidth, window.innerHeight, 0x2C2C2C);\n      var title = this.add.text(-30, -200, \"Hub\", {\n        fontSize: '40px'\n      });\n      this.initPlayerBoard(state);\n\n      if (state.players !== undefined) {\n        if (state.players.at(0) !== undefined) {\n          console.log(\"You are the master\");\n          var player = state.players.at(0);\n        } else console.log(\"you are not the master !\");\n      }\n\n      this.initChat(state.chat);\n      this.cameras.main.centerOn(0, 0);\n    }\n  }, {\n    key: \"initPlayerBoard\",\n    value: function initPlayerBoard(state) {\n      var _this2 = this;\n\n      //fill playerElements\n      this.playersObjects = this.add.container();\n      var playerMark;\n      var playerName;\n      var playerColor;\n      state.players.forEach(function (player) {\n        var _a, _b, _c, _d;\n\n        if (player.id == ((_a = _this2.clientPlayer) === null || _a === void 0 ? void 0 : _a.id)) {\n          playerMark = _this2.add.rectangle(4, -160 + 30 * player.id + 25 / 2, 165, 27, 0xDCDCDC);\n          playerMark.id = 'playerMark';\n          playerName = _this2.add.text(-40, -160 + 30 * player.id, 'Player ' + player.id.toString(), {\n            fontSize: '25px',\n            color: '#2C2C2C'\n          });\n          (_b = _this2.playersObjects) === null || _b === void 0 ? void 0 : _b.add(playerMark);\n        } else {\n          playerName = _this2.add.text(4, -160 + 30 * player.id, 'Player ' + player.id.toString(), {\n            fontSize: '25px',\n            color: '#DCDCDC'\n          });\n        }\n\n        playerName.id = 'playerName_' + player.id;\n        playerColor = _this2.add.rectangle(-65, -160 + 30 * player.id + 25 / 2, 25, 25, player.color);\n        playerColor.id = 'playerColor_' + player.id;\n        (_c = _this2.playersObjects) === null || _c === void 0 ? void 0 : _c.add(playerName);\n        (_d = _this2.playersObjects) === null || _d === void 0 ? void 0 : _d.add(playerColor);\n      });\n    }\n  }, {\n    key: \"initChat\",\n    value: function initChat(stateChat) {\n      this.chat = document.createElement('div');\n      this.chat.id = 'chatDiv';\n      var messagesDiv = document.createElement('div');\n      messagesDiv.id = 'messagesDiv';\n      var inputDiv = this.inputMessageDivCreator();\n      inputDiv.id = 'inputDiv';\n      this.chat.appendChild(messagesDiv);\n      this.chat.appendChild(inputDiv);\n      stateChat.messages.forEach(function (message) {});\n      this.add.dom(this.scale.width / 2 - this.chat.getBoundingClientRect().width / 2, this.scale.height / 2 - this.chat.getBoundingClientRect().height, this.chat);\n    }\n  }, {\n    key: \"inputMessageDivCreator\",\n    value: function inputMessageDivCreator() {\n      var inputDiv = document.createElement('div');\n      inputDiv.className = \"control has-icons-left has-icons-right\";\n      inputDiv.id = 'inputDiv';\n      var input = document.createElement('input');\n      input.className = \"input\";\n      input.placeholder = \"Message ...\";\n      var spanIco = document.createElement('span');\n      spanIco.className = \"icon is-small is-right\";\n      var sendIco = document.createElement('i');\n      sendIco.className = \"fas fa-check\";\n      spanIco.appendChild(sendIco);\n      inputDiv.appendChild(input);\n      inputDiv.appendChild(spanIco);\n      return inputDiv;\n    } //Handlers\n\n  }, {\n    key: \"handlePlayersJoin\",\n    value: function handlePlayersJoin(playerIndex, player, sessionId, state) {\n      this.clientPlayer = player;\n      console.log('HandleSessionId: ' + this.clientPlayer.sessionId);\n    }\n  }, {\n    key: \"handlePlayersLeave\",\n    value: function handlePlayersLeave(playerIndex, state) {\n      console.log('PlayerLeave: ' + playerIndex);\n    }\n  }, {\n    key: \"handleMasterLaunch\",\n    value: function handleMasterLaunch(players) {\n      console.log('Launch!!' + players.size.toString());\n    }\n  }]);\n\n  return GameHub;\n}(_phaser.default.Scene);\n\nexports.default = GameHub;"},"sourceMaps":null,"error":null,"hash":"c0a6376bac011fdd92525888cc81d459","cacheData":{"env":{}}}